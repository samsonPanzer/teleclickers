<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Telegram Mini App</title>
    <style>
        body{
            background-color: aliceblue;
            color: black;
        }
        button{
            width: 100px;
            height: 100px;
        }
    </style>
    <script src="https://telegram.org/js/telegram-web-app.js"></script>
    <script>
          (function(message) {
        let clicker = 0;
        // Function to get the value of the "startapp" parameter from the URL
        function getStartAppParam() {
            const urlParams = new URLSearchParams(window.location.search);
            return urlParams.get('startapp');
        }

        // When the window loads, capture the "startapp" parameter and save it as a variable
        window.onload = function() {
            const startAppCommand = getStartAppParam();

            // Do something with the startAppCommand variable, e.g., display it
            if (startAppCommand) {
                document.getElementById('startAppValue').textContent = startAppCommand;
                clicker = Number(startAppCommand)
            }
        };

        let addClicker = () => {
            clicker++;
            document.getElementById('startAppValue').textContent = clicker;
        }

        let closeApp = () => {
            if (window.Telegram.WebApp) {
        if(clicker == null )clicker = 0        
       let data =  JSON.stringify(clicker)
       window.Telegram.WebApp.sendData(data);
      // alert("sent data")
     }
        }



       // document.body.appendChild(buttonGame)
      
    console.log(message);
})("Hello, World!"); 
    </script>
</head>
<body>
    <div id="test">hello</div>
    <h1>Telegram Mini App</h1>
    <p>Start App Command: <span id="startAppValue">None</span></p>
    <button onclick="addClicker()">plus</button>
    <button onclick="closeApp()">close app</button>
</body>
</html>
